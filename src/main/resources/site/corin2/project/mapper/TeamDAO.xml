<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

	<mapper namespace="site.corin2.project.dao.TeamDAO">
	
	<!-- 프로젝트에 속한 모든 팀 멤버 TeamDTO 조회 -->
	<select id="allTeamMemberSelect" resultType="site.corin2.project.dto.TeamDTO">
		select * from team where projectnum = #{projectNum}
	</select>
	
	<!-- 프로젝트에 속한 모든 팀 멤버 UserDTO 조회 -->
	<select id="allTeamMemberProfileSelect" resultType="site.corin2.user.dto.UserDTO">
		select *
		from user
		where userid in (select t.USERID from team t inner join user u on t.USERID = u.USERID where t.PROJECTNUM = #{projectNum});
	</select>
	
	<!-- 프로젝트 생성시 팀생성 -->
	<insert id="insertTeamProject">
		insert into team
		(projectnum, userid, gradenum, bookmark, isdeleted)
		values(#{projectNum}, #{userId},'G300',null,0)
	</insert>
	
	</mapper>